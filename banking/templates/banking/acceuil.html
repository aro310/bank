{% load static %}

<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>NovaBank - Accueil</title>
        <link rel="stylesheet" href="{% static 'banking/acceuil.css' %}">
        
        <script src="https://cdn.jsdelivr.net/npm/three@0.181.1/examples/js/three.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/three@0.181.1/examples/js/loaders/FontLoader.js"></script>
    </head>
<body>
    <div class="container">
        <div class="left-section">
            <div class="illustration">
                <canvas id="threejs-canvas" class="circle"></canvas>
                <div class="stars"></div>
                <div class="mountains"></div>
            </div>
            <h1 class="bank-name">NovaBank</h1>
            <p class="slogan">L'avenir de vos finances commence ici</p>
        </div>

        <div class="right-section">
            <h2>Bienvenue chez <span>NovaBank</span></h2>
            <p>Choisissez votre espace :</p>

            <div class="buttons">
                <a href="{% url 'login_client' %}" class="btn client">Je suis un client</a>
                <a href="{% url 'login_admin' %}" class="btn admin">Je suis un administrateur</a>
            </div>
        </div>
    </div>

    <script>
        // Initialisation de la scène Three.js
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        const canvas = document.getElementById('threejs-canvas');
        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true }); // Alpha pour transparence si besoin
        const width = canvas.clientWidth || 300; // Adapter à la taille du cercle via CSS
        const height = canvas.clientHeight || 300;
        renderer.setSize(width, height);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
        camera.position.z = 5;

        // Ajout d'une lumière
        const light = new THREE.PointLight(0xffffff, 1, 100);
        light.position.set(10, 10, 10);
        scene.add(light);

        // Chargement de la police pour le texte 3D
        const loader = new THREE.FontLoader();
        loader.load('https://cdn.jsdelivr.net/npm/three@0.181.1/examples/fonts/helvetiker_regular.typeface.json', function (font) {
            const geometry = new THREE.TextGeometry('NovaBank', {
                font: font,
                size: 0.8,
                height: 0.2,
                curveSegments: 12,
                bevelEnabled: true,
                bevelThickness: 0.03,
                bevelSize: 0.02,
                bevelOffset: 0,
                bevelSegments: 5
            });

            // Matériau avec couleur assortie (bleu typique pour une banque, adapter via CSS si besoin : #4A90E2)
            const material = new THREE.MeshPhongMaterial({ color: 0x4A90E2 }); // Bleu pour matcher un thème bancaire moderne
            const textMesh = new THREE.Mesh(geometry, material);

            // Centrage du texte
            geometry.computeBoundingBox();
            const boundingBox = geometry.boundingBox;
            textMesh.position.x = - (boundingBox.max.x - boundingBox.min.x) / 2;
            textMesh.position.y = - (boundingBox.max.y - boundingBox.min.y) / 2;

            scene.add(textMesh);

            // Fonction d'animation
            function animate() {
                requestAnimationFrame(animate);
                textMesh.rotation.y += 0.005; // Rotation lente pour l'animation
                renderer.render(scene, camera);
            }
            animate();
        });
    </script>
</body>
</html>